<wxs module="module">
var getRankString = function(index) {
if(index+1 == 1) {return "1st"}
else if (index+1 == 2) {return "2nd"}
else if (index+1 == 3) {return "3rd"}
else {return ""}
}
var getMax = function(array) {
  var max = undefined;
  for (var i = 0; i < array.length; ++i) {
    max = max === undefined ? 
      array[i] : 
      (max >= array[i] ? max : array[i]);
  }
  return max;
}

var getFontSize = function(index, shouldActivate) {

if(!shouldActivate) {return "15px"}

if(index==0) {return "35px"}
else if(index==1) {return "25px"}
else if (index==2) {return "20px"}
else {return "12px"}
}

module.exports.getRankString = getRankString;
 module.exports.getFontSize = getFontSize; 
</wxs>


<scroll-view class='wholeContainer'>
  <view class='listCell' style='background-color:{{cellBackgroundColors[index]}}' wx:for="{{votes}}" wx:key="*this" bindtap='cellTapped' data-id='{{index}}'>
    <text class='titleLabel'>{{item.name}}</text>
    <text hidden='{{!session.expired}}' class='rankLabel' bindtap='detailLabelTapped'>{{item.count + '票'}}</text>
  </view>

<view class='participantContainerView'>
  <label class='participantWrapper'>
    <view class='participantContainer'  wx:for="{{avatarUrls}}" wx:key="*this">
    <!-- 怎样用遍历数组设置z-index？？？？ -->
         <image class='participantImage' src='{{item}}' style='z-index:{{item.zIndex}}, margin-left:-10px'></image> 
         <!-- <text>{{index}}</text> -->
    </view>
  </label>
</view>

<view class='deadLineContainer'>
  <text class='deadLineView'>截止日期: {{session.deadlineStringToDisplay}}</text>
</view>
<!-- hidden='{{!session.expired || (session.expired && hasUniqueWinner)}}'> -->
<view class='reVoteContainer' hidden='true'>
  <text class='reVoteTitle' >投票结果不唯一，是否进行二次投票?</text>
  <button class='reVoteButton' type='primary' bindtap='reVoteButtonTapped'>是</button>
</view>

<view class='endVoteContainer' hidden='{{!isSessionCreator || session.expired}}'>
  <button class='endVoteButton' type='primary' bindtap='endVoteButtonTapped'>结束投票</button>
</view>

</scroll-view>